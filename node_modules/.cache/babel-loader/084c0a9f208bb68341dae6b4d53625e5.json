{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useWeb3React}from'@web3-react/core';import DELEGATOR_ABI from'abis/DelegatorAbi.json';import AutocompleteControlField from'components/AutocompleteControlField';import{DELEGATOR_ADD,FLAGS}from'constants/contractAddress';import useContract from'hooks/useContract';import{getTokenOptions}from'utils/options';import bitGoUTXO from'../../utils/bitUTXO';import{jsx as _jsx}from\"react/jsx-runtime\";const TokenField=_ref=>{let{control,poolAvailable,token}=_ref;const[verusTokens,setVerusTokens]=useState(['']);const delegatorContract=useContract(DELEGATOR_ADD,DELEGATOR_ABI);const{account}=useWeb3React();const getTokens=async()=>{const tokens=await delegatorContract.callStatic.getTokenList(0,0);// eslint-disable-next-line\nconst tokenList=tokens.map(e=>({label:e.name,value:e.iaddress,id:bitGoUTXO.address.toBase58Check(Buffer.from(e.iaddress.slice(2),'hex'),102),flags:e.flags}))// eslint-disable-next-line\n.filter(token=>token.flags&FLAGS.MAPPING_ERC20_DEFINITION&&token.label);return tokenList;};useEffect(async()=>{if(delegatorContract&&account){let tokens=await getTokens();tokens=getTokenOptions(poolAvailable,tokens);setVerusTokens(tokens);}},[delegatorContract,account]);return/*#__PURE__*/_jsx(AutocompleteControlField,{name:\"token\",id:\"token\",label:token||\"Token\",fullWidth:true,variant:\"standard\",defaultValue:\"\",control:control,options:verusTokens,rules:{required:'Address is required'}});};export default TokenField;","map":{"version":3,"names":["React","useState","useEffect","useWeb3React","DELEGATOR_ABI","AutocompleteControlField","DELEGATOR_ADD","FLAGS","useContract","getTokenOptions","bitGoUTXO","jsx","_jsx","TokenField","_ref","control","poolAvailable","token","verusTokens","setVerusTokens","delegatorContract","account","getTokens","tokens","callStatic","getTokenList","tokenList","map","e","label","name","value","iaddress","id","address","toBase58Check","Buffer","from","slice","flags","filter","MAPPING_ERC20_DEFINITION","fullWidth","variant","defaultValue","options","rules","required"],"sources":["/Users/oddfl3x/Code/varB/vARRRBridgeWebsite-main/src/components/ConvertForm/TokenField.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport { useWeb3React } from '@web3-react/core';\n\nimport DELEGATOR_ABI from 'abis/DelegatorAbi.json';\nimport AutocompleteControlField from 'components/AutocompleteControlField'\nimport { DELEGATOR_ADD, FLAGS } from 'constants/contractAddress';\nimport useContract from 'hooks/useContract';\nimport { getTokenOptions } from 'utils/options'\n\nimport bitGoUTXO from '../../utils/bitUTXO';\n\nconst TokenField = ({ control, poolAvailable, token }) => {\n  const [verusTokens, setVerusTokens] = useState(['']);\n  const delegatorContract = useContract(DELEGATOR_ADD, DELEGATOR_ABI);\n  const { account } = useWeb3React();\n  const getTokens = async () => {\n\n    const tokens = await delegatorContract.callStatic.getTokenList(0, 0);\n    // eslint-disable-next-line\n    const tokenList = tokens.map(e => ({\n      label: e.name,\n      value: e.iaddress,\n      id: bitGoUTXO.address.toBase58Check(Buffer.from(e.iaddress.slice(2), 'hex'), 102), flags: e.flags\n    }))\n      // eslint-disable-next-line\n      .filter(token => (token.flags & FLAGS.MAPPING_ERC20_DEFINITION) && token.label)\n    return tokenList\n  }\n\n  useEffect(async () => {\n\n    if (delegatorContract && account) {\n      let tokens = await getTokens();\n\n      tokens = getTokenOptions(poolAvailable, tokens);\n      setVerusTokens(tokens);\n    }\n  }, [delegatorContract, account])\n\n\n  return (<AutocompleteControlField\n    name=\"token\"\n    id=\"token\"\n    label={token || \"Token\"}\n    fullWidth\n    variant=\"standard\"\n    defaultValue=\"\"\n    control={control}\n    options={verusTokens}\n    rules={{\n      required: 'Address is required'\n    }}\n  />)\n\n}\nexport default TokenField\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAElD,OAASC,YAAY,KAAQ,kBAAkB,CAE/C,MAAO,CAAAC,aAAa,KAAM,wBAAwB,CAClD,MAAO,CAAAC,wBAAwB,KAAM,qCAAqC,CAC1E,OAASC,aAAa,CAAEC,KAAK,KAAQ,2BAA2B,CAChE,MAAO,CAAAC,WAAW,KAAM,mBAAmB,CAC3C,OAASC,eAAe,KAAQ,eAAe,CAE/C,MAAO,CAAAC,SAAS,KAAM,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAuC,IAAtC,CAAEC,OAAO,CAAEC,aAAa,CAAEC,KAAM,CAAC,CAAAH,IAAA,CACnD,KAAM,CAACI,WAAW,CAAEC,cAAc,CAAC,CAAGlB,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CACpD,KAAM,CAAAmB,iBAAiB,CAAGZ,WAAW,CAACF,aAAa,CAAEF,aAAa,CAAC,CACnE,KAAM,CAAEiB,OAAQ,CAAC,CAAGlB,YAAY,CAAC,CAAC,CAClC,KAAM,CAAAmB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAE5B,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAH,iBAAiB,CAACI,UAAU,CAACC,YAAY,CAAC,CAAC,CAAE,CAAC,CAAC,CACpE;AACA,KAAM,CAAAC,SAAS,CAAGH,MAAM,CAACI,GAAG,CAACC,CAAC,GAAK,CACjCC,KAAK,CAAED,CAAC,CAACE,IAAI,CACbC,KAAK,CAAEH,CAAC,CAACI,QAAQ,CACjBC,EAAE,CAAEvB,SAAS,CAACwB,OAAO,CAACC,aAAa,CAACC,MAAM,CAACC,IAAI,CAACT,CAAC,CAACI,QAAQ,CAACM,KAAK,CAAC,CAAC,CAAC,CAAE,KAAK,CAAC,CAAE,GAAG,CAAC,CAAEC,KAAK,CAAEX,CAAC,CAACW,KAC9F,CAAC,CAAC,CACA;AAAA,CACCC,MAAM,CAACvB,KAAK,EAAKA,KAAK,CAACsB,KAAK,CAAGhC,KAAK,CAACkC,wBAAwB,EAAKxB,KAAK,CAACY,KAAK,CAAC,CACjF,MAAO,CAAAH,SAAS,CAClB,CAAC,CAEDxB,SAAS,CAAC,SAAY,CAEpB,GAAIkB,iBAAiB,EAAIC,OAAO,CAAE,CAChC,GAAI,CAAAE,MAAM,CAAG,KAAM,CAAAD,SAAS,CAAC,CAAC,CAE9BC,MAAM,CAAGd,eAAe,CAACO,aAAa,CAAEO,MAAM,CAAC,CAC/CJ,cAAc,CAACI,MAAM,CAAC,CACxB,CACF,CAAC,CAAE,CAACH,iBAAiB,CAAEC,OAAO,CAAC,CAAC,CAGhC,mBAAQT,IAAA,CAACP,wBAAwB,EAC/ByB,IAAI,CAAC,OAAO,CACZG,EAAE,CAAC,OAAO,CACVJ,KAAK,CAAEZ,KAAK,EAAI,OAAQ,CACxByB,SAAS,MACTC,OAAO,CAAC,UAAU,CAClBC,YAAY,CAAC,EAAE,CACf7B,OAAO,CAAEA,OAAQ,CACjB8B,OAAO,CAAE3B,WAAY,CACrB4B,KAAK,CAAE,CACLC,QAAQ,CAAE,qBACZ,CAAE,CACH,CAAC,CAEJ,CAAC,CACD,cAAe,CAAAlC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}