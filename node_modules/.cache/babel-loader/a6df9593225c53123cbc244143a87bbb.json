{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VerusPayInvoice = exports.VERUSPAY_VERSION_MASK = exports.VERUSPAY_VERSION_SIGNED = exports.VERUSPAY_VERSION_LASTVALID = exports.VERUSPAY_VERSION_FIRSTVALID = exports.VERUSPAY_VERSION_CURRENT = void 0;\nconst __1 = require(\"../../\");\nconst keys_1 = require(\"../../keys\");\nconst Hash160_1 = require(\"./../Hash160\");\nconst bufferutils_1 = require(\"../../../utils/bufferutils\");\nconst vdxf_1 = require(\"../../../constants/vdxf\");\nconst address_1 = require(\"../../../utils/address\");\nconst createHash = require(\"create-hash\");\nconst base64url_1 = require(\"base64url\");\nconst VerusPayInvoiceDetails_1 = require(\"./VerusPayInvoiceDetails\");\nconst bn_js_1 = require(\"bn.js\");\nexports.VERUSPAY_VERSION_CURRENT = new bn_js_1.BN(3, 10);\nexports.VERUSPAY_VERSION_FIRSTVALID = new bn_js_1.BN(3, 10);\nexports.VERUSPAY_VERSION_LASTVALID = new bn_js_1.BN(3, 10);\nexports.VERUSPAY_VERSION_SIGNED = new bn_js_1.BN('80000000', 16);\nexports.VERUSPAY_VERSION_MASK = exports.VERUSPAY_VERSION_SIGNED;\nclass VerusPayInvoice extends __1.VDXFObject {\n  constructor() {\n    let request = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      details: new VerusPayInvoiceDetails_1.VerusPayInvoiceDetails()\n    };\n    super(__1.VERUSPAY_INVOICE_VDXF_KEY.vdxfid);\n    this.system_id = request.system_id;\n    this.signing_id = request.signing_id;\n    this.signature = request.signature ? new __1.VerusIDSignature(request.signature, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY, false) : undefined;\n    this.details = new VerusPayInvoiceDetails_1.VerusPayInvoiceDetails(request.details);\n    if (request.version) this.version = request.version;else this.version = exports.VERUSPAY_VERSION_CURRENT;\n  }\n  getVersionNoFlags() {\n    return this.version.and(exports.VERUSPAY_VERSION_MASK.notn(exports.VERUSPAY_VERSION_MASK.bitLength()));\n  }\n  isValidVersion() {\n    return this.getVersionNoFlags().gte(exports.VERUSPAY_VERSION_FIRSTVALID) && this.getVersionNoFlags().lte(exports.VERUSPAY_VERSION_LASTVALID);\n  }\n  isSigned() {\n    return !!this.version.and(exports.VERUSPAY_VERSION_SIGNED).toNumber();\n  }\n  setSigned() {\n    this.version = this.version.xor(exports.VERUSPAY_VERSION_SIGNED);\n  }\n  getDetailsHash(signedBlockheight) {\n    let signatureVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    if (this.isSigned()) {\n      var heightBufferWriter = new bufferutils_1.default.BufferWriter(Buffer.allocUnsafe(4));\n      heightBufferWriter.writeUInt32(signedBlockheight);\n      if (signatureVersion === 1) {\n        return createHash(\"sha256\").update(vdxf_1.VERUS_DATA_SIGNATURE_PREFIX).update((0, address_1.fromBase58Check)(this.system_id).hash).update(heightBufferWriter.buffer).update((0, address_1.fromBase58Check)(this.signing_id).hash).update(this.details.toSha256()).digest();\n      } else {\n        return createHash(\"sha256\").update((0, address_1.fromBase58Check)(this.system_id).hash).update(heightBufferWriter.buffer).update((0, address_1.fromBase58Check)(this.signing_id).hash).update(vdxf_1.VERUS_DATA_SIGNATURE_PREFIX).update(this.details.toSha256()).digest();\n      }\n    } else return this.details.toSha256();\n  }\n  _dataByteLength() {\n    let signer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.signing_id;\n    if (this.isSigned()) {\n      let length = 0;\n      const _signature = this.signature ? this.signature : new __1.VerusIDSignature({\n        signature: \"\"\n      }, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY, false);\n      const _system_id = Hash160_1.Hash160.fromAddress(this.system_id);\n      length += _system_id.byteLength();\n      const _signing_id = Hash160_1.Hash160.fromAddress(signer);\n      length += _signing_id.byteLength();\n      length += _signature.byteLength();\n      length += this.details.getByteLength();\n      return length;\n    } else return this.details.getByteLength();\n  }\n  _toDataBuffer() {\n    let signer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.signing_id;\n    const writer = new bufferutils_1.default.BufferWriter(Buffer.alloc(this.dataByteLength()));\n    if (this.isSigned()) {\n      const _signing_id = Hash160_1.Hash160.fromAddress(signer);\n      const _signature = this.signature ? this.signature : new __1.VerusIDSignature({\n        signature: \"\"\n      }, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY, false);\n      const _system_id = Hash160_1.Hash160.fromAddress(this.system_id);\n      writer.writeSlice(_system_id.toBuffer());\n      writer.writeSlice(_signing_id.toBuffer());\n      writer.writeSlice(_signature.toBuffer());\n    }\n    writer.writeSlice(this.details.toBuffer());\n    return writer.buffer;\n  }\n  dataByteLength() {\n    return this._dataByteLength();\n  }\n  toDataBuffer() {\n    return this._toDataBuffer();\n  }\n  _fromDataBuffer(buffer, offset) {\n    const reader = new bufferutils_1.default.BufferReader(buffer, offset);\n    const reqLength = reader.readCompactSize();\n    if (reqLength == 0) {\n      throw new Error(\"Cannot create request from empty buffer\");\n    } else {\n      if (this.isSigned()) {\n        this.system_id = (0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), vdxf_1.I_ADDR_VERSION);\n        this.signing_id = (0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), vdxf_1.I_ADDR_VERSION);\n        const _sig = new __1.VerusIDSignature(undefined, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY, false);\n        reader.offset = _sig.fromBuffer(reader.buffer, reader.offset, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY.vdxfid);\n        this.signature = _sig;\n      }\n      const _details = new VerusPayInvoiceDetails_1.VerusPayInvoiceDetails();\n      reader.offset = _details.fromBuffer(reader.buffer, reader.offset);\n      this.details = _details;\n    }\n    return reader.offset;\n  }\n  fromDataBuffer(buffer, offset) {\n    return this._fromDataBuffer(buffer, offset);\n  }\n  toWalletDeeplinkUri() {\n    return \"\".concat(__1.WALLET_VDXF_KEY.vdxfid.toLowerCase(), \"://x-callback-url/\").concat(__1.VERUSPAY_INVOICE_VDXF_KEY.vdxfid, \"/\").concat(this.toString(false));\n  }\n  static fromWalletDeeplinkUri(uri) {\n    const split = uri.split(\"\".concat(__1.VERUSPAY_INVOICE_VDXF_KEY.vdxfid, \"/\"));\n    const inv = new VerusPayInvoice();\n    inv.fromBuffer(base64url_1.default.toBuffer(split[1]), 0, __1.VERUSPAY_INVOICE_VDXF_KEY.vdxfid);\n    return inv;\n  }\n  toQrString() {\n    return this.toString(true);\n  }\n  static fromQrString(qrstring) {\n    const inv = new VerusPayInvoice();\n    inv.fromBuffer(base64url_1.default.toBuffer(qrstring), 0);\n    return inv;\n  }\n  static fromJson(data) {\n    return new VerusPayInvoice({\n      details: VerusPayInvoiceDetails_1.VerusPayInvoiceDetails.fromJson(data.details),\n      signature: data.signature != null ? __1.VerusIDSignature.fromJson(data.signature) : undefined,\n      signing_id: data.signing_id,\n      system_id: data.system_id,\n      version: new bn_js_1.BN(data.version)\n    });\n  }\n  toJson() {\n    return {\n      vdxfkey: this.vdxfkey,\n      system_id: this.system_id,\n      signing_id: this.signing_id,\n      signature: this.isSigned() ? this.signature.toJson() : this.signature,\n      details: this.details.toJson(),\n      version: this.version.toString()\n    };\n  }\n}\nexports.VerusPayInvoice = VerusPayInvoice;","map":{"version":3,"names":["Object","defineProperty","exports","value","VerusPayInvoice","VERUSPAY_VERSION_MASK","VERUSPAY_VERSION_SIGNED","VERUSPAY_VERSION_LASTVALID","VERUSPAY_VERSION_FIRSTVALID","VERUSPAY_VERSION_CURRENT","__1","require","keys_1","Hash160_1","bufferutils_1","vdxf_1","address_1","createHash","base64url_1","VerusPayInvoiceDetails_1","bn_js_1","BN","VDXFObject","constructor","request","arguments","length","undefined","details","VerusPayInvoiceDetails","VERUSPAY_INVOICE_VDXF_KEY","vdxfid","system_id","signing_id","signature","VerusIDSignature","IDENTITY_AUTH_SIG_VDXF_KEY","version","getVersionNoFlags","and","notn","bitLength","isValidVersion","gte","lte","isSigned","toNumber","setSigned","xor","getDetailsHash","signedBlockheight","signatureVersion","heightBufferWriter","default","BufferWriter","Buffer","allocUnsafe","writeUInt32","update","VERUS_DATA_SIGNATURE_PREFIX","fromBase58Check","hash","buffer","toSha256","digest","_dataByteLength","signer","_signature","_system_id","Hash160","fromAddress","byteLength","_signing_id","getByteLength","_toDataBuffer","writer","alloc","dataByteLength","writeSlice","toBuffer","toDataBuffer","_fromDataBuffer","offset","reader","BufferReader","reqLength","readCompactSize","Error","toBase58Check","readSlice","HASH160_BYTE_LENGTH","I_ADDR_VERSION","_sig","fromBuffer","_details","fromDataBuffer","toWalletDeeplinkUri","concat","WALLET_VDXF_KEY","toLowerCase","toString","fromWalletDeeplinkUri","uri","split","inv","toQrString","fromQrString","qrstring","fromJson","data","toJson","vdxfkey"],"sources":["/Users/oddfl3x/Code/varB/vARRRBridgeWebsite-main/node_modules/verus-typescript-primitives/dist/vdxf/classes/payment/VerusPayInvoice.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VerusPayInvoice = exports.VERUSPAY_VERSION_MASK = exports.VERUSPAY_VERSION_SIGNED = exports.VERUSPAY_VERSION_LASTVALID = exports.VERUSPAY_VERSION_FIRSTVALID = exports.VERUSPAY_VERSION_CURRENT = void 0;\nconst __1 = require(\"../../\");\nconst keys_1 = require(\"../../keys\");\nconst Hash160_1 = require(\"./../Hash160\");\nconst bufferutils_1 = require(\"../../../utils/bufferutils\");\nconst vdxf_1 = require(\"../../../constants/vdxf\");\nconst address_1 = require(\"../../../utils/address\");\nconst createHash = require(\"create-hash\");\nconst base64url_1 = require(\"base64url\");\nconst VerusPayInvoiceDetails_1 = require(\"./VerusPayInvoiceDetails\");\nconst bn_js_1 = require(\"bn.js\");\nexports.VERUSPAY_VERSION_CURRENT = new bn_js_1.BN(3, 10);\nexports.VERUSPAY_VERSION_FIRSTVALID = new bn_js_1.BN(3, 10);\nexports.VERUSPAY_VERSION_LASTVALID = new bn_js_1.BN(3, 10);\nexports.VERUSPAY_VERSION_SIGNED = new bn_js_1.BN('80000000', 16);\nexports.VERUSPAY_VERSION_MASK = exports.VERUSPAY_VERSION_SIGNED;\nclass VerusPayInvoice extends __1.VDXFObject {\n    constructor(request = {\n        details: new VerusPayInvoiceDetails_1.VerusPayInvoiceDetails(),\n    }) {\n        super(__1.VERUSPAY_INVOICE_VDXF_KEY.vdxfid);\n        this.system_id = request.system_id;\n        this.signing_id = request.signing_id;\n        this.signature = request.signature\n            ? new __1.VerusIDSignature(request.signature, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY, false)\n            : undefined;\n        this.details = new VerusPayInvoiceDetails_1.VerusPayInvoiceDetails(request.details);\n        if (request.version)\n            this.version = request.version;\n        else\n            this.version = exports.VERUSPAY_VERSION_CURRENT;\n    }\n    getVersionNoFlags() {\n        return this.version.and(exports.VERUSPAY_VERSION_MASK.notn(exports.VERUSPAY_VERSION_MASK.bitLength()));\n    }\n    isValidVersion() {\n        return this.getVersionNoFlags().gte(exports.VERUSPAY_VERSION_FIRSTVALID) && this.getVersionNoFlags().lte(exports.VERUSPAY_VERSION_LASTVALID);\n    }\n    isSigned() {\n        return !!(this.version.and(exports.VERUSPAY_VERSION_SIGNED).toNumber());\n    }\n    setSigned() {\n        this.version = this.version.xor(exports.VERUSPAY_VERSION_SIGNED);\n    }\n    getDetailsHash(signedBlockheight, signatureVersion = 2) {\n        if (this.isSigned()) {\n            var heightBufferWriter = new bufferutils_1.default.BufferWriter(Buffer.allocUnsafe(4));\n            heightBufferWriter.writeUInt32(signedBlockheight);\n            if (signatureVersion === 1) {\n                return createHash(\"sha256\")\n                    .update(vdxf_1.VERUS_DATA_SIGNATURE_PREFIX)\n                    .update((0, address_1.fromBase58Check)(this.system_id).hash)\n                    .update(heightBufferWriter.buffer)\n                    .update((0, address_1.fromBase58Check)(this.signing_id).hash)\n                    .update(this.details.toSha256())\n                    .digest();\n            }\n            else {\n                return createHash(\"sha256\")\n                    .update((0, address_1.fromBase58Check)(this.system_id).hash)\n                    .update(heightBufferWriter.buffer)\n                    .update((0, address_1.fromBase58Check)(this.signing_id).hash)\n                    .update(vdxf_1.VERUS_DATA_SIGNATURE_PREFIX)\n                    .update(this.details.toSha256())\n                    .digest();\n            }\n        }\n        else\n            return this.details.toSha256();\n    }\n    _dataByteLength(signer = this.signing_id) {\n        if (this.isSigned()) {\n            let length = 0;\n            const _signature = this.signature\n                ? this.signature\n                : new __1.VerusIDSignature({ signature: \"\" }, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY, false);\n            const _system_id = Hash160_1.Hash160.fromAddress(this.system_id);\n            length += _system_id.byteLength();\n            const _signing_id = Hash160_1.Hash160.fromAddress(signer);\n            length += _signing_id.byteLength();\n            length += _signature.byteLength();\n            length += this.details.getByteLength();\n            return length;\n        }\n        else\n            return this.details.getByteLength();\n    }\n    _toDataBuffer(signer = this.signing_id) {\n        const writer = new bufferutils_1.default.BufferWriter(Buffer.alloc(this.dataByteLength()));\n        if (this.isSigned()) {\n            const _signing_id = Hash160_1.Hash160.fromAddress(signer);\n            const _signature = this.signature\n                ? this.signature\n                : new __1.VerusIDSignature({ signature: \"\" }, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY, false);\n            const _system_id = Hash160_1.Hash160.fromAddress(this.system_id);\n            writer.writeSlice(_system_id.toBuffer());\n            writer.writeSlice(_signing_id.toBuffer());\n            writer.writeSlice(_signature.toBuffer());\n        }\n        writer.writeSlice(this.details.toBuffer());\n        return writer.buffer;\n    }\n    dataByteLength() {\n        return this._dataByteLength();\n    }\n    toDataBuffer() {\n        return this._toDataBuffer();\n    }\n    _fromDataBuffer(buffer, offset) {\n        const reader = new bufferutils_1.default.BufferReader(buffer, offset);\n        const reqLength = reader.readCompactSize();\n        if (reqLength == 0) {\n            throw new Error(\"Cannot create request from empty buffer\");\n        }\n        else {\n            if (this.isSigned()) {\n                this.system_id = (0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), vdxf_1.I_ADDR_VERSION);\n                this.signing_id = (0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), vdxf_1.I_ADDR_VERSION);\n                const _sig = new __1.VerusIDSignature(undefined, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY, false);\n                reader.offset = _sig.fromBuffer(reader.buffer, reader.offset, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY.vdxfid);\n                this.signature = _sig;\n            }\n            const _details = new VerusPayInvoiceDetails_1.VerusPayInvoiceDetails();\n            reader.offset = _details.fromBuffer(reader.buffer, reader.offset);\n            this.details = _details;\n        }\n        return reader.offset;\n    }\n    fromDataBuffer(buffer, offset) {\n        return this._fromDataBuffer(buffer, offset);\n    }\n    toWalletDeeplinkUri() {\n        return `${__1.WALLET_VDXF_KEY.vdxfid.toLowerCase()}://x-callback-url/${__1.VERUSPAY_INVOICE_VDXF_KEY.vdxfid}/${this.toString(false)}`;\n    }\n    static fromWalletDeeplinkUri(uri) {\n        const split = uri.split(`${__1.VERUSPAY_INVOICE_VDXF_KEY.vdxfid}/`);\n        const inv = new VerusPayInvoice();\n        inv.fromBuffer(base64url_1.default.toBuffer(split[1]), 0, __1.VERUSPAY_INVOICE_VDXF_KEY.vdxfid);\n        return inv;\n    }\n    toQrString() {\n        return this.toString(true);\n    }\n    static fromQrString(qrstring) {\n        const inv = new VerusPayInvoice();\n        inv.fromBuffer(base64url_1.default.toBuffer(qrstring), 0);\n        return inv;\n    }\n    static fromJson(data) {\n        return new VerusPayInvoice({\n            details: VerusPayInvoiceDetails_1.VerusPayInvoiceDetails.fromJson(data.details),\n            signature: data.signature != null ? __1.VerusIDSignature.fromJson(data.signature) : undefined,\n            signing_id: data.signing_id,\n            system_id: data.system_id,\n            version: new bn_js_1.BN(data.version)\n        });\n    }\n    toJson() {\n        return {\n            vdxfkey: this.vdxfkey,\n            system_id: this.system_id,\n            signing_id: this.signing_id,\n            signature: this.isSigned() ? this.signature.toJson() : this.signature,\n            details: this.details.toJson(),\n            version: this.version.toString()\n        };\n    }\n}\nexports.VerusPayInvoice = VerusPayInvoice;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}