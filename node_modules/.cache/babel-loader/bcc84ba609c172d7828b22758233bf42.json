{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IdentityScript = void 0;\nconst bn_js_1 = require(\"bn.js\");\nconst Identity_1 = require(\"../Identity\");\nconst OptCCParams_1 = require(\"../OptCCParams\");\nconst SmartTransactionScript_1 = require(\"./SmartTransactionScript\");\nconst evals_1 = require(\"../../utils/evals\");\nconst TxDestination_1 = require(\"../TxDestination\");\nconst IdentityID_1 = require(\"../IdentityID\");\nclass IdentityScript extends SmartTransactionScript_1.SmartTransactionScript {\n  constructor(master, params) {\n    super(master, params);\n  }\n  static fromIdentity(identity) {\n    if (identity.version.lt(Identity_1.Identity.VERSION_CURRENT)) {\n      throw new Error(\"Cannot generate script for outdated identity version\");\n    }\n    const identityAddress = identity.getIdentityAddress();\n    const master = new OptCCParams_1.OptCCParams({\n      version: Identity_1.Identity.VERSION_CURRENT,\n      eval_code: new bn_js_1.BN(evals_1.EVALS.EVAL_NONE),\n      m: new bn_js_1.BN(1),\n      n: new bn_js_1.BN(3),\n      destinations: [new TxDestination_1.TxDestination(IdentityID_1.IdentityID.fromAddress(identityAddress)), new TxDestination_1.TxDestination(identity.revocation_authority), new TxDestination_1.TxDestination(identity.recovery_authority)],\n      vdata: []\n    });\n    const params = new OptCCParams_1.OptCCParams({\n      version: Identity_1.Identity.VERSION_CURRENT,\n      eval_code: new bn_js_1.BN(evals_1.EVALS.EVAL_IDENTITY_PRIMARY),\n      m: new bn_js_1.BN(1),\n      n: new bn_js_1.BN(1),\n      destinations: [new TxDestination_1.TxDestination(IdentityID_1.IdentityID.fromAddress(identityAddress))],\n      vdata: [identity.toBuffer(), new OptCCParams_1.OptCCParams({\n        version: Identity_1.Identity.VERSION_CURRENT,\n        eval_code: new bn_js_1.BN(evals_1.EVALS.EVAL_IDENTITY_REVOKE),\n        m: new bn_js_1.BN(1),\n        n: new bn_js_1.BN(1),\n        destinations: [new TxDestination_1.TxDestination(identity.revocation_authority)],\n        vdata: []\n      }).toChunk(), new OptCCParams_1.OptCCParams({\n        version: Identity_1.Identity.VERSION_CURRENT,\n        eval_code: new bn_js_1.BN(evals_1.EVALS.EVAL_IDENTITY_RECOVER),\n        m: new bn_js_1.BN(1),\n        n: new bn_js_1.BN(1),\n        destinations: [new TxDestination_1.TxDestination(identity.recovery_authority)],\n        vdata: []\n      }).toChunk()]\n    });\n    return new IdentityScript(master, params);\n  }\n  getIdentity(multimapKeylists) {\n    const identity = new Identity_1.Identity();\n    identity.fromBuffer(this.params.getParamObject(), 0, multimapKeylists);\n    return identity;\n  }\n}\nexports.IdentityScript = IdentityScript;","map":{"version":3,"names":["Object","defineProperty","exports","value","IdentityScript","bn_js_1","require","Identity_1","OptCCParams_1","SmartTransactionScript_1","evals_1","TxDestination_1","IdentityID_1","SmartTransactionScript","constructor","master","params","fromIdentity","identity","version","lt","Identity","VERSION_CURRENT","Error","identityAddress","getIdentityAddress","OptCCParams","eval_code","BN","EVALS","EVAL_NONE","m","n","destinations","TxDestination","IdentityID","fromAddress","revocation_authority","recovery_authority","vdata","EVAL_IDENTITY_PRIMARY","toBuffer","EVAL_IDENTITY_REVOKE","toChunk","EVAL_IDENTITY_RECOVER","getIdentity","multimapKeylists","fromBuffer","getParamObject"],"sources":["/Users/oddfl3x/Code/varB/NATI<>Verus Bridge Proxy Page/node_modules/verus-typescript-primitives/dist/pbaas/transaction/IdentityScript.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IdentityScript = void 0;\nconst bn_js_1 = require(\"bn.js\");\nconst Identity_1 = require(\"../Identity\");\nconst OptCCParams_1 = require(\"../OptCCParams\");\nconst SmartTransactionScript_1 = require(\"./SmartTransactionScript\");\nconst evals_1 = require(\"../../utils/evals\");\nconst TxDestination_1 = require(\"../TxDestination\");\nconst IdentityID_1 = require(\"../IdentityID\");\nclass IdentityScript extends SmartTransactionScript_1.SmartTransactionScript {\n    constructor(master, params) {\n        super(master, params);\n    }\n    static fromIdentity(identity) {\n        if (identity.version.lt(Identity_1.Identity.VERSION_CURRENT)) {\n            throw new Error(\"Cannot generate script for outdated identity version\");\n        }\n        const identityAddress = identity.getIdentityAddress();\n        const master = new OptCCParams_1.OptCCParams({\n            version: Identity_1.Identity.VERSION_CURRENT,\n            eval_code: new bn_js_1.BN(evals_1.EVALS.EVAL_NONE),\n            m: new bn_js_1.BN(1),\n            n: new bn_js_1.BN(3),\n            destinations: [\n                new TxDestination_1.TxDestination(IdentityID_1.IdentityID.fromAddress(identityAddress)),\n                new TxDestination_1.TxDestination(identity.revocation_authority),\n                new TxDestination_1.TxDestination(identity.recovery_authority)\n            ],\n            vdata: []\n        });\n        const params = new OptCCParams_1.OptCCParams({\n            version: Identity_1.Identity.VERSION_CURRENT,\n            eval_code: new bn_js_1.BN(evals_1.EVALS.EVAL_IDENTITY_PRIMARY),\n            m: new bn_js_1.BN(1),\n            n: new bn_js_1.BN(1),\n            destinations: [\n                new TxDestination_1.TxDestination(IdentityID_1.IdentityID.fromAddress(identityAddress))\n            ],\n            vdata: [\n                identity.toBuffer(),\n                new OptCCParams_1.OptCCParams({\n                    version: Identity_1.Identity.VERSION_CURRENT,\n                    eval_code: new bn_js_1.BN(evals_1.EVALS.EVAL_IDENTITY_REVOKE),\n                    m: new bn_js_1.BN(1),\n                    n: new bn_js_1.BN(1),\n                    destinations: [\n                        new TxDestination_1.TxDestination(identity.revocation_authority)\n                    ],\n                    vdata: []\n                }).toChunk(),\n                new OptCCParams_1.OptCCParams({\n                    version: Identity_1.Identity.VERSION_CURRENT,\n                    eval_code: new bn_js_1.BN(evals_1.EVALS.EVAL_IDENTITY_RECOVER),\n                    m: new bn_js_1.BN(1),\n                    n: new bn_js_1.BN(1),\n                    destinations: [\n                        new TxDestination_1.TxDestination(identity.recovery_authority)\n                    ],\n                    vdata: []\n                }).toChunk()\n            ]\n        });\n        return new IdentityScript(master, params);\n    }\n    getIdentity(multimapKeylists) {\n        const identity = new Identity_1.Identity();\n        identity.fromBuffer(this.params.getParamObject(), 0, multimapKeylists);\n        return identity;\n    }\n}\nexports.IdentityScript = IdentityScript;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}