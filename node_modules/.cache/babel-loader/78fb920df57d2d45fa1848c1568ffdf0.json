{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Request = void 0;\nconst __1 = require(\"../\");\nconst keys_1 = require(\"../keys\");\nconst Challenge_1 = require(\"./Challenge\");\nconst Hash160_1 = require(\"./Hash160\");\nconst bufferutils_1 = require(\"../../utils/bufferutils\");\nconst vdxf_1 = require(\"../../constants/vdxf\");\nconst address_1 = require(\"../../utils/address\");\nconst createHash = require(\"create-hash\");\nconst base64url_1 = require(\"base64url\");\nclass Request extends __1.VDXFObject {\n  constructor() {\n    let request = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      system_id: \"\",\n      signing_id: \"\",\n      challenge: new Challenge_1.Challenge()\n    };\n    let vdxfkey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid;\n    super(vdxfkey);\n    this.system_id = request.system_id;\n    this.signing_id = request.signing_id;\n    this.signature = request.signature ? new __1.VerusIDSignature(request.signature, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY) : undefined;\n    this.challenge = new Challenge_1.Challenge(request.challenge);\n  }\n  getChallengeHash(signedBlockheight) {\n    let signatureVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    var heightBufferWriter = new bufferutils_1.default.BufferWriter(Buffer.allocUnsafe(4));\n    heightBufferWriter.writeUInt32(signedBlockheight);\n    if (signatureVersion === 1) {\n      return createHash(\"sha256\").update(vdxf_1.VERUS_DATA_SIGNATURE_PREFIX).update((0, address_1.fromBase58Check)(this.system_id).hash).update(heightBufferWriter.buffer).update((0, address_1.fromBase58Check)(this.signing_id).hash).update(this.challenge.toSha256()).digest();\n    } else {\n      return createHash(\"sha256\").update((0, address_1.fromBase58Check)(this.system_id).hash).update(heightBufferWriter.buffer).update((0, address_1.fromBase58Check)(this.signing_id).hash).update(vdxf_1.VERUS_DATA_SIGNATURE_PREFIX).update(this.challenge.toSha256()).digest();\n    }\n  }\n  toJson() {\n    return {\n      vdxfkey: this.vdxfkey,\n      system_id: this.system_id,\n      signing_id: this.signing_id,\n      signature: this.signature ? this.signature.toJson() : this.signature,\n      challenge: this.challenge.toJson()\n    };\n  }\n  _dataByteLength() {\n    let signer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.signing_id;\n    let length = 0;\n    const _signing_id = Hash160_1.Hash160.fromAddress(signer);\n    const _signature = this.signature ? this.signature : new __1.VerusIDSignature({\n      signature: \"\"\n    }, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY);\n    if (this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n      const _system_id = Hash160_1.Hash160.fromAddress(this.system_id);\n      length += _system_id.byteLength();\n    }\n    length += _signing_id.byteLength();\n    length += _signature.byteLength();\n    length += this.challenge.byteLength();\n    return length;\n  }\n  _toDataBuffer() {\n    let signer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.signing_id;\n    const writer = new bufferutils_1.default.BufferWriter(Buffer.alloc(this.dataByteLength()));\n    const _signing_id = Hash160_1.Hash160.fromAddress(signer);\n    const _signature = this.signature ? this.signature : new __1.VerusIDSignature({\n      signature: \"\"\n    }, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY);\n    if (this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n      const _system_id = Hash160_1.Hash160.fromAddress(this.system_id);\n      writer.writeSlice(_system_id.toBuffer());\n    }\n    writer.writeSlice(_signing_id.toBuffer());\n    writer.writeSlice(_signature.toBuffer());\n    writer.writeSlice(this.challenge.toBuffer());\n    return writer.buffer;\n  }\n  dataByteLength() {\n    return this._dataByteLength();\n  }\n  toDataBuffer() {\n    return this._toDataBuffer();\n  }\n  _fromDataBuffer(buffer, offset) {\n    const reader = new bufferutils_1.default.BufferReader(buffer, offset);\n    const reqLength = reader.readCompactSize();\n    if (reqLength == 0) {\n      throw new Error(\"Cannot create request from empty buffer\");\n    } else {\n      if (this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n        this.system_id = (0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), vdxf_1.I_ADDR_VERSION);\n      }\n      this.signing_id = (0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid ? vdxf_1.I_ADDR_VERSION : vdxf_1.R_ADDR_VERSION);\n      const _sig = new __1.VerusIDSignature();\n      reader.offset = _sig.fromBuffer(reader.buffer, reader.offset);\n      this.signature = _sig;\n      if (this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n        const _challenge = new Challenge_1.Challenge();\n        reader.offset = _challenge.fromBuffer(reader.buffer, reader.offset);\n        this.challenge = _challenge;\n      }\n    }\n    return reader.offset;\n  }\n  fromDataBuffer(buffer, offset) {\n    return this._fromDataBuffer(buffer, offset);\n  }\n  toWalletDeeplinkUri() {\n    if (this.signature == null) throw new Error(\"Request must be signed before it can be used as a deep link\");\n    return \"\".concat(__1.WALLET_VDXF_KEY.vdxfid.toLowerCase(), \"://x-callback-url/\").concat(__1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid, \"/?\").concat(__1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid, \"=\").concat(this.toString());\n  }\n  static fromWalletDeeplinkUri(uri) {\n    const split = uri.split(\"\".concat(__1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid, \"=\"));\n    const req = new Request();\n    req.fromBuffer(base64url_1.default.toBuffer(split[1]));\n    return req;\n  }\n  toQrString() {\n    if (this.signature == null) throw new Error(\"Request must be signed before it can be used as a deep link\");\n    return this.toString(true);\n  }\n  static fromQrString(qrstring) {\n    const req = new Request();\n    req.fromBuffer(base64url_1.default.toBuffer(qrstring));\n    return req;\n  }\n}\nexports.Request = Request;","map":{"version":3,"names":["Object","defineProperty","exports","value","Request","__1","require","keys_1","Challenge_1","Hash160_1","bufferutils_1","vdxf_1","address_1","createHash","base64url_1","VDXFObject","constructor","request","arguments","length","undefined","system_id","signing_id","challenge","Challenge","vdxfkey","LOGIN_CONSENT_REQUEST_VDXF_KEY","vdxfid","signature","VerusIDSignature","IDENTITY_AUTH_SIG_VDXF_KEY","getChallengeHash","signedBlockheight","signatureVersion","heightBufferWriter","default","BufferWriter","Buffer","allocUnsafe","writeUInt32","update","VERUS_DATA_SIGNATURE_PREFIX","fromBase58Check","hash","buffer","toSha256","digest","toJson","_dataByteLength","signer","_signing_id","Hash160","fromAddress","_signature","_system_id","byteLength","_toDataBuffer","writer","alloc","dataByteLength","writeSlice","toBuffer","toDataBuffer","_fromDataBuffer","offset","reader","BufferReader","reqLength","readCompactSize","Error","toBase58Check","readSlice","HASH160_BYTE_LENGTH","I_ADDR_VERSION","R_ADDR_VERSION","_sig","fromBuffer","_challenge","fromDataBuffer","toWalletDeeplinkUri","concat","WALLET_VDXF_KEY","toLowerCase","toString","fromWalletDeeplinkUri","uri","split","req","toQrString","fromQrString","qrstring"],"sources":["/Users/oddfl3x/Code/varB/vARRRBridgeWebsite-main/node_modules/verus-typescript-primitives/dist/vdxf/classes/Request.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Request = void 0;\nconst __1 = require(\"../\");\nconst keys_1 = require(\"../keys\");\nconst Challenge_1 = require(\"./Challenge\");\nconst Hash160_1 = require(\"./Hash160\");\nconst bufferutils_1 = require(\"../../utils/bufferutils\");\nconst vdxf_1 = require(\"../../constants/vdxf\");\nconst address_1 = require(\"../../utils/address\");\nconst createHash = require(\"create-hash\");\nconst base64url_1 = require(\"base64url\");\nclass Request extends __1.VDXFObject {\n    constructor(request = {\n        system_id: \"\",\n        signing_id: \"\",\n        challenge: new Challenge_1.Challenge(),\n    }, vdxfkey = __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n        super(vdxfkey);\n        this.system_id = request.system_id;\n        this.signing_id = request.signing_id;\n        this.signature = request.signature\n            ? new __1.VerusIDSignature(request.signature, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY)\n            : undefined;\n        this.challenge = new Challenge_1.Challenge(request.challenge);\n    }\n    getChallengeHash(signedBlockheight, signatureVersion = 2) {\n        var heightBufferWriter = new bufferutils_1.default.BufferWriter(Buffer.allocUnsafe(4));\n        heightBufferWriter.writeUInt32(signedBlockheight);\n        if (signatureVersion === 1) {\n            return createHash(\"sha256\")\n                .update(vdxf_1.VERUS_DATA_SIGNATURE_PREFIX)\n                .update((0, address_1.fromBase58Check)(this.system_id).hash)\n                .update(heightBufferWriter.buffer)\n                .update((0, address_1.fromBase58Check)(this.signing_id).hash)\n                .update(this.challenge.toSha256())\n                .digest();\n        }\n        else {\n            return createHash(\"sha256\")\n                .update((0, address_1.fromBase58Check)(this.system_id).hash)\n                .update(heightBufferWriter.buffer)\n                .update((0, address_1.fromBase58Check)(this.signing_id).hash)\n                .update(vdxf_1.VERUS_DATA_SIGNATURE_PREFIX)\n                .update(this.challenge.toSha256())\n                .digest();\n        }\n    }\n    toJson() {\n        return {\n            vdxfkey: this.vdxfkey,\n            system_id: this.system_id,\n            signing_id: this.signing_id,\n            signature: this.signature ? this.signature.toJson() : this.signature,\n            challenge: this.challenge.toJson(),\n        };\n    }\n    _dataByteLength(signer = this.signing_id) {\n        let length = 0;\n        const _signing_id = Hash160_1.Hash160.fromAddress(signer);\n        const _signature = this.signature\n            ? this.signature\n            : new __1.VerusIDSignature({ signature: \"\" }, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY);\n        if (this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n            const _system_id = Hash160_1.Hash160.fromAddress(this.system_id);\n            length += _system_id.byteLength();\n        }\n        length += _signing_id.byteLength();\n        length += _signature.byteLength();\n        length += this.challenge.byteLength();\n        return length;\n    }\n    _toDataBuffer(signer = this.signing_id) {\n        const writer = new bufferutils_1.default.BufferWriter(Buffer.alloc(this.dataByteLength()));\n        const _signing_id = Hash160_1.Hash160.fromAddress(signer);\n        const _signature = this.signature\n            ? this.signature\n            : new __1.VerusIDSignature({ signature: \"\" }, keys_1.IDENTITY_AUTH_SIG_VDXF_KEY);\n        if (this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n            const _system_id = Hash160_1.Hash160.fromAddress(this.system_id);\n            writer.writeSlice(_system_id.toBuffer());\n        }\n        writer.writeSlice(_signing_id.toBuffer());\n        writer.writeSlice(_signature.toBuffer());\n        writer.writeSlice(this.challenge.toBuffer());\n        return writer.buffer;\n    }\n    dataByteLength() {\n        return this._dataByteLength();\n    }\n    toDataBuffer() {\n        return this._toDataBuffer();\n    }\n    _fromDataBuffer(buffer, offset) {\n        const reader = new bufferutils_1.default.BufferReader(buffer, offset);\n        const reqLength = reader.readCompactSize();\n        if (reqLength == 0) {\n            throw new Error(\"Cannot create request from empty buffer\");\n        }\n        else {\n            if (this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n                this.system_id = (0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), vdxf_1.I_ADDR_VERSION);\n            }\n            this.signing_id = (0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid\n                ? vdxf_1.I_ADDR_VERSION\n                : vdxf_1.R_ADDR_VERSION);\n            const _sig = new __1.VerusIDSignature();\n            reader.offset = _sig.fromBuffer(reader.buffer, reader.offset);\n            this.signature = _sig;\n            if (this.vdxfkey === __1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid) {\n                const _challenge = new Challenge_1.Challenge();\n                reader.offset = _challenge.fromBuffer(reader.buffer, reader.offset);\n                this.challenge = _challenge;\n            }\n        }\n        return reader.offset;\n    }\n    fromDataBuffer(buffer, offset) {\n        return this._fromDataBuffer(buffer, offset);\n    }\n    toWalletDeeplinkUri() {\n        if (this.signature == null)\n            throw new Error(\"Request must be signed before it can be used as a deep link\");\n        return `${__1.WALLET_VDXF_KEY.vdxfid.toLowerCase()}://x-callback-url/${__1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid}/?${__1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid}=${this.toString()}`;\n    }\n    static fromWalletDeeplinkUri(uri) {\n        const split = uri.split(`${__1.LOGIN_CONSENT_REQUEST_VDXF_KEY.vdxfid}=`);\n        const req = new Request();\n        req.fromBuffer(base64url_1.default.toBuffer(split[1]));\n        return req;\n    }\n    toQrString() {\n        if (this.signature == null)\n            throw new Error(\"Request must be signed before it can be used as a deep link\");\n        return this.toString(true);\n    }\n    static fromQrString(qrstring) {\n        const req = new Request();\n        req.fromBuffer(base64url_1.default.toBuffer(qrstring));\n        return req;\n    }\n}\nexports.Request = Request;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}