{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Context = void 0;\nconst __1 = require(\"..\");\nconst vdxf_1 = require(\"../../constants/vdxf\");\nconst address_1 = require(\"../../utils/address\");\nconst bufferutils_1 = require(\"../../utils/bufferutils\");\nconst varuint_1 = require(\"../../utils/varuint\");\nclass Context extends __1.VDXFObject {\n  constructor() {\n    let kv = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let vdxfkey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : __1.LOGIN_CONSENT_CONTEXT_VDXF_KEY.vdxfid;\n    super(vdxfkey);\n    this.kv = kv;\n  }\n  dataByteLength() {\n    let length = 0;\n    const keys = Object.keys(this.kv);\n    length += varuint_1.default.encodingLength(keys.length);\n    for (const key of keys) {\n      const value = this.kv[key];\n      if (value != null) {\n        const valueBuf = Buffer.from(value, \"utf-8\");\n        length += (0, address_1.fromBase58Check)(key).hash.length;\n        length += valueBuf.length + varuint_1.default.encodingLength(valueBuf.length);\n      }\n    }\n    return length;\n  }\n  toDataBuffer() {\n    const buffer = Buffer.alloc(this.dataByteLength());\n    const writer = new bufferutils_1.default.BufferWriter(buffer);\n    const keys = Object.keys(this.kv);\n    writer.writeCompactSize(keys.length);\n    for (const key of Object.keys(this.kv)) {\n      const value = this.kv[key];\n      const valueBuf = Buffer.from(value, \"utf-8\");\n      writer.writeSlice((0, address_1.fromBase58Check)(key).hash);\n      writer.writeVarSlice(valueBuf);\n    }\n    return writer.buffer;\n  }\n  fromDataBuffer(buffer, offset) {\n    const reader = new bufferutils_1.default.BufferReader(buffer, offset);\n    const contextLength = reader.readCompactSize();\n    if (contextLength == 0) {\n      this.kv = {};\n      return reader.offset;\n    } else {\n      const numKeys = reader.readCompactSize();\n      for (let i = 0; i < numKeys; i++) {\n        this.kv[(0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), vdxf_1.I_ADDR_VERSION)] = reader.readVarSlice().toString(\"utf-8\");\n      }\n      return reader.offset;\n    }\n  }\n  toJson() {\n    return {\n      kv: this.kv,\n      vdxfkey: this.vdxfkey\n    };\n  }\n}\nexports.Context = Context;","map":{"version":3,"names":["Object","defineProperty","exports","value","Context","__1","require","vdxf_1","address_1","bufferutils_1","varuint_1","VDXFObject","constructor","kv","arguments","length","undefined","vdxfkey","LOGIN_CONSENT_CONTEXT_VDXF_KEY","vdxfid","dataByteLength","keys","default","encodingLength","key","valueBuf","Buffer","from","fromBase58Check","hash","toDataBuffer","buffer","alloc","writer","BufferWriter","writeCompactSize","writeSlice","writeVarSlice","fromDataBuffer","offset","reader","BufferReader","contextLength","readCompactSize","numKeys","i","toBase58Check","readSlice","HASH160_BYTE_LENGTH","I_ADDR_VERSION","readVarSlice","toString","toJson"],"sources":["/Users/oddfl3x/Code/varB/vARRRBridgeWebsite-main/node_modules/verus-typescript-primitives/dist/vdxf/classes/Context.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Context = void 0;\nconst __1 = require(\"..\");\nconst vdxf_1 = require(\"../../constants/vdxf\");\nconst address_1 = require(\"../../utils/address\");\nconst bufferutils_1 = require(\"../../utils/bufferutils\");\nconst varuint_1 = require(\"../../utils/varuint\");\nclass Context extends __1.VDXFObject {\n    constructor(kv = {}, vdxfkey = __1.LOGIN_CONSENT_CONTEXT_VDXF_KEY.vdxfid) {\n        super(vdxfkey);\n        this.kv = kv;\n    }\n    dataByteLength() {\n        let length = 0;\n        const keys = Object.keys(this.kv);\n        length += varuint_1.default.encodingLength(keys.length);\n        for (const key of keys) {\n            const value = this.kv[key];\n            if (value != null) {\n                const valueBuf = Buffer.from(value, \"utf-8\");\n                length += (0, address_1.fromBase58Check)(key).hash.length;\n                length += valueBuf.length + varuint_1.default.encodingLength(valueBuf.length);\n            }\n        }\n        return length;\n    }\n    toDataBuffer() {\n        const buffer = Buffer.alloc(this.dataByteLength());\n        const writer = new bufferutils_1.default.BufferWriter(buffer);\n        const keys = Object.keys(this.kv);\n        writer.writeCompactSize(keys.length);\n        for (const key of Object.keys(this.kv)) {\n            const value = this.kv[key];\n            const valueBuf = Buffer.from(value, \"utf-8\");\n            writer.writeSlice((0, address_1.fromBase58Check)(key).hash);\n            writer.writeVarSlice(valueBuf);\n        }\n        return writer.buffer;\n    }\n    fromDataBuffer(buffer, offset) {\n        const reader = new bufferutils_1.default.BufferReader(buffer, offset);\n        const contextLength = reader.readCompactSize();\n        if (contextLength == 0) {\n            this.kv = {};\n            return reader.offset;\n        }\n        else {\n            const numKeys = reader.readCompactSize();\n            for (let i = 0; i < numKeys; i++) {\n                this.kv[(0, address_1.toBase58Check)(reader.readSlice(vdxf_1.HASH160_BYTE_LENGTH), vdxf_1.I_ADDR_VERSION)] = reader.readVarSlice().toString(\"utf-8\");\n            }\n            return reader.offset;\n        }\n    }\n    toJson() {\n        return {\n            kv: this.kv,\n            vdxfkey: this.vdxfkey,\n        };\n    }\n}\nexports.Context = Context;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}