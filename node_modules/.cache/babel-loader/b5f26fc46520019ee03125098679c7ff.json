{"ast":null,"code":"var _jsxFileName = \"/Users/oddfl3x/Code/varB/NATIBridgeWebsite-main/src/components/ConvertForm/TokenField.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport DELEGATOR_ABI from 'abis/DelegatorAbi.json';\nimport AutocompleteControlField from 'components/AutocompleteControlField';\nimport { DELEGATOR_ADD, FLAGS } from 'constants/contractAddress';\nimport useContract from 'hooks/useContract';\nimport { getTokenOptions } from 'utils/options';\nimport bitGoUTXO from '../../utils/bitUTXO';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TokenField = ({\n  control,\n  poolAvailable,\n  token\n}) => {\n  _s();\n  const [verusTokens, setVerusTokens] = useState(['']);\n  const delegatorContract = useContract(DELEGATOR_ADD, DELEGATOR_ABI);\n  const {\n    account\n  } = useWeb3React();\n  const getTokens = async () => {\n    const tokens = await delegatorContract.callStatic.getTokenList(0, 0);\n    // eslint-disable-next-line\n    const tokenList = tokens.map(e => ({\n      label: e.name,\n      value: e.iaddress,\n      id: bitGoUTXO.address.toBase58Check(Buffer.from(e.iaddress.slice(2), 'hex'), 102),\n      flags: e.flags\n    }))\n    // eslint-disable-next-line\n    .filter(token => token.flags & FLAGS.MAPPING_ERC20_DEFINITION && token.label);\n    return tokenList;\n  };\n  useEffect(async () => {\n    if (delegatorContract && account) {\n      let tokens = await getTokens();\n      tokens = getTokenOptions(poolAvailable, tokens);\n      setVerusTokens(tokens);\n    }\n  }, [delegatorContract, account]);\n  return /*#__PURE__*/_jsxDEV(AutocompleteControlField, {\n    name: \"token\",\n    id: \"token\",\n    label: token || \"Token\",\n    fullWidth: true,\n    variant: \"standard\",\n    defaultValue: \"\",\n    control: control,\n    options: verusTokens,\n    rules: {\n      required: 'Address is required'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 11\n  }, this);\n};\n_s(TokenField, \"5UxrAk+ALg78VFkQ6LP6aNK1fRM=\", false, function () {\n  return [useContract, useWeb3React];\n});\n_c = TokenField;\nexport default TokenField;\nvar _c;\n$RefreshReg$(_c, \"TokenField\");","map":{"version":3,"names":["React","useState","useEffect","useWeb3React","DELEGATOR_ABI","AutocompleteControlField","DELEGATOR_ADD","FLAGS","useContract","getTokenOptions","bitGoUTXO","jsxDEV","_jsxDEV","TokenField","control","poolAvailable","token","_s","verusTokens","setVerusTokens","delegatorContract","account","getTokens","tokens","callStatic","getTokenList","tokenList","map","e","label","name","value","iaddress","id","address","toBase58Check","Buffer","from","slice","flags","filter","MAPPING_ERC20_DEFINITION","fullWidth","variant","defaultValue","options","rules","required","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/oddfl3x/Code/varB/NATIBridgeWebsite-main/src/components/ConvertForm/TokenField.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport { useWeb3React } from '@web3-react/core';\n\nimport DELEGATOR_ABI from 'abis/DelegatorAbi.json';\nimport AutocompleteControlField from 'components/AutocompleteControlField'\nimport { DELEGATOR_ADD, FLAGS } from 'constants/contractAddress';\nimport useContract from 'hooks/useContract';\nimport { getTokenOptions } from 'utils/options'\n\nimport bitGoUTXO from '../../utils/bitUTXO';\n\nconst TokenField = ({ control, poolAvailable, token }) => {\n  const [verusTokens, setVerusTokens] = useState(['']);\n  const delegatorContract = useContract(DELEGATOR_ADD, DELEGATOR_ABI);\n  const { account } = useWeb3React();\n  const getTokens = async () => {\n\n    const tokens = await delegatorContract.callStatic.getTokenList(0, 0);\n    // eslint-disable-next-line\n    const tokenList = tokens.map(e => ({\n      label: e.name,\n      value: e.iaddress,\n      id: bitGoUTXO.address.toBase58Check(Buffer.from(e.iaddress.slice(2), 'hex'), 102), flags: e.flags\n    }))\n      // eslint-disable-next-line\n      .filter(token => (token.flags & FLAGS.MAPPING_ERC20_DEFINITION) && token.label)\n    return tokenList\n  }\n\n  useEffect(async () => {\n\n    if (delegatorContract && account) {\n      let tokens = await getTokens();\n\n      tokens = getTokenOptions(poolAvailable, tokens);\n      setVerusTokens(tokens);\n    }\n  }, [delegatorContract, account])\n\n\n  return (<AutocompleteControlField\n    name=\"token\"\n    id=\"token\"\n    label={token || \"Token\"}\n    fullWidth\n    variant=\"standard\"\n    defaultValue=\"\"\n    control={control}\n    options={verusTokens}\n    rules={{\n      required: 'Address is required'\n    }}\n  />)\n\n}\nexport default TokenField\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAElD,SAASC,YAAY,QAAQ,kBAAkB;AAE/C,OAAOC,aAAa,MAAM,wBAAwB;AAClD,OAAOC,wBAAwB,MAAM,qCAAqC;AAC1E,SAASC,aAAa,EAAEC,KAAK,QAAQ,2BAA2B;AAChE,OAAOC,WAAW,MAAM,mBAAmB;AAC3C,SAASC,eAAe,QAAQ,eAAe;AAE/C,OAAOC,SAAS,MAAM,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,MAAMC,UAAU,GAAGA,CAAC;EAAEC,OAAO;EAAEC,aAAa;EAAEC;AAAM,CAAC,KAAK;EAAAC,EAAA;EACxD,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGlB,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EACpD,MAAMmB,iBAAiB,GAAGZ,WAAW,CAACF,aAAa,EAAEF,aAAa,CAAC;EACnE,MAAM;IAAEiB;EAAQ,CAAC,GAAGlB,YAAY,CAAC,CAAC;EAClC,MAAMmB,SAAS,GAAG,MAAAA,CAAA,KAAY;IAE5B,MAAMC,MAAM,GAAG,MAAMH,iBAAiB,CAACI,UAAU,CAACC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC;IACpE;IACA,MAAMC,SAAS,GAAGH,MAAM,CAACI,GAAG,CAACC,CAAC,KAAK;MACjCC,KAAK,EAAED,CAAC,CAACE,IAAI;MACbC,KAAK,EAAEH,CAAC,CAACI,QAAQ;MACjBC,EAAE,EAAEvB,SAAS,CAACwB,OAAO,CAACC,aAAa,CAACC,MAAM,CAACC,IAAI,CAACT,CAAC,CAACI,QAAQ,CAACM,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,GAAG,CAAC;MAAEC,KAAK,EAAEX,CAAC,CAACW;IAC9F,CAAC,CAAC;IACA;IAAA,CACCC,MAAM,CAACxB,KAAK,IAAKA,KAAK,CAACuB,KAAK,GAAGhC,KAAK,CAACkC,wBAAwB,IAAKzB,KAAK,CAACa,KAAK,CAAC;IACjF,OAAOH,SAAS;EAClB,CAAC;EAEDxB,SAAS,CAAC,YAAY;IAEpB,IAAIkB,iBAAiB,IAAIC,OAAO,EAAE;MAChC,IAAIE,MAAM,GAAG,MAAMD,SAAS,CAAC,CAAC;MAE9BC,MAAM,GAAGd,eAAe,CAACM,aAAa,EAAEQ,MAAM,CAAC;MAC/CJ,cAAc,CAACI,MAAM,CAAC;IACxB;EACF,CAAC,EAAE,CAACH,iBAAiB,EAAEC,OAAO,CAAC,CAAC;EAGhC,oBAAQT,OAAA,CAACP,wBAAwB;IAC/ByB,IAAI,EAAC,OAAO;IACZG,EAAE,EAAC,OAAO;IACVJ,KAAK,EAAEb,KAAK,IAAI,OAAQ;IACxB0B,SAAS;IACTC,OAAO,EAAC,UAAU;IAClBC,YAAY,EAAC,EAAE;IACf9B,OAAO,EAAEA,OAAQ;IACjB+B,OAAO,EAAE3B,WAAY;IACrB4B,KAAK,EAAE;MACLC,QAAQ,EAAE;IACZ;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEJ,CAAC;AAAAlC,EAAA,CA3CKJ,UAAU;EAAA,QAEYL,WAAW,EACjBL,YAAY;AAAA;AAAAiD,EAAA,GAH5BvC,UAAU;AA4ChB,eAAeA,UAAU;AAAA,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}